<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pixel Snake</title>
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at top, #010308 0%, #050b15 60%);
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      color: #fefefe;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 16px;
    }
    canvas {
      border: 4px solid rgba(255, 255, 255, 0.15);
      border-radius: 12px;
      background: rgba(0, 0, 0, 0.35);
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.6);
    }
    .hud {
      display: flex;
      gap: 24px;
      font-size: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.18em;
    }
    button {
      background: #4fd1c5;
      border: none;
      color: #04110f;
      font-weight: 700;
      padding: 10px 18px;
      border-radius: 999px;
      cursor: pointer;
      box-shadow: 0 6px 18px rgba(79, 209, 197, 0.4);
    }
    button:focus-visible {
      outline: 2px solid #fefefe;
      outline-offset: 3px;
    }
  </style>
</head>
<body>
  <h1>Pixel Snake</h1>
  <canvas id="board" width="420" height="420"></canvas>
  <div class="hud">
    <span>Score: <strong id="score">0</strong></span>
    <button id="reset">Restart</button>
  </div>
  <script>
    const canvas = document.getElementById('board');
    const ctx = canvas.getContext('2d');
    const grid = 20;
    const size = canvas.width / grid;
    let snake, direction, food, score, speed, timer;

    function init() {
      snake = [{ x: 5, y: 10 }];
      direction = { x: 1, y: 0 };
      score = 0;
      speed = 150;
      placeFood();
      updateScore();
      clearInterval(timer);
      timer = setInterval(step, speed);
    }

    function updateScore() {
      document.getElementById('score').textContent = score;
    }

    function placeFood() {
      food = {
        x: Math.floor(Math.random() * grid),
        y: Math.floor(Math.random() * grid)
      };
    }

    function step() {
      const head = {
        x: (snake[0].x + direction.x + grid) % grid,
        y: (snake[0].y + direction.y + grid) % grid
      };

      if (snake.some(segment => segment.x === head.x && segment.y === head.y)) {
        flash();
        return init();
      }

      snake.unshift(head);
      if (head.x === food.x && head.y === food.y) {
        score += 10;
        speed = Math.max(70, speed - 3);
        clearInterval(timer);
        timer = setInterval(step, speed);
        placeFood();
        updateScore();
      } else {
        snake.pop();
      }

      draw();
    }

    function flash() {
      ctx.fillStyle = 'rgba(255,0,80,0.5)';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = '#111727';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = '#4fd1c5';
      snake.forEach(part => {
        ctx.fillRect(part.x * size + 2, part.y * size + 2, size - 4, size - 4);
      });

      ctx.fillStyle = '#f97316';
      ctx.fillRect(food.x * size + 4, food.y * size + 4, size - 8, size - 8);
    }

    window.addEventListener('keydown', event => {
      const { key } = event;
      if (key === 'ArrowUp' && direction.y !== 1) direction = { x: 0, y: -1 };
      if (key === 'ArrowDown' && direction.y !== -1) direction = { x: 0, y: 1 };
      if (key === 'ArrowLeft' && direction.x !== 1) direction = { x: -1, y: 0 };
      if (key === 'ArrowRight' && direction.x !== -1) direction = { x: 1, y: 0 };
    });

    document.getElementById('reset').addEventListener('click', init);
    init();
  </script>
</body>
</html>
